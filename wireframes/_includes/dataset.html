---
layout: basic
title: Dataset
nav: Home
---

<main role="main" id="content">
    <div class="jumbotron">
        <div class="container">
            <h1 class="display-4 font-weight-bold" id="mainTitle">Dataset</h1>
            <p><span id ="updateDate">Last updated: 14/05/2020</span> (<a id = "previous" href = "previous">previous versions</a>)</p>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <h2 class="pb-3">About this dataset</h2>
                <form>
                    <div class="form-group pb-1">
                        <label for="datasetTitle" class="form-label">Dataset title</label>
                        {% if loggedIn == false %}
                        <input id="datasetTitle" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="datasetTitle" type="text" class="form-control">
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="metadataCatalogueReference" class="form-label">Metadata catalogue reference</label>
                        {% if loggedIn == false %}
                        <input id="metadataCatalogueReference" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="metadataCatalogueReference" type="text" class="form-control">
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="link" class="form-label">Link to dataset</label>
                        {% if loggedIn == false %}
                        <input id="link" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="link" type="text" class="form-control">
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="datasetType" class="form-label">Dataset type</label>
                        {% if loggedIn == false %}
                        <input id="datasetType" type="text" class="form-control" readonly>
                        {% else %}
                        <select class="form-control" id="datasetType">
                            <option selected disabled>Please choose an option</option>
                            <option>dataset</option>
                            <option>reference</option>
                        </select>
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="description" class="form-label">Description</label>
                        {% if loggedIn == false %}
                        <textarea class="form-control" id="description" rows="5" readonly></textarea>
                        {% else %}
                        <textarea class="form-control" id="description" rows="5"></textarea>
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="input">Input datasets</label>
                        {% if loggedIn == false %}
                        <input id="input" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="input" type="text" class="form-control" readonly>
                        {% endif %}
                        {% if loggedIn == true %}
                        <a role="button" id="dependencies" href="dependencies/"
                            class="btn btn-primary rounded-0 mb-2 mt-2">Add/edit input datasets</a>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="datasetID">Dataset ID</label>
                        <input id="datasetID" type="text" class="form-control" readonly>
                    </div>
                <h2 class="pb-3">Ownership</h2>
                    <div class="form-group pb-1">
                        <label for="inputOwner">Owner</label>
                        {% if loggedIn == false %}
                        <input id="inputOwner" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="inputOwner" type="text" class="form-control">
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="contactName" class="form-label">Contact name</label>
                        {% if loggedIn == false %}
                        <input id="contactName" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="contactName" type="text" class="form-control">
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="contactEmail" class="form-label">Contact email</label>
                        {% if loggedIn == false %}
                        <input id="contactEmail" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="contactEmail" type="text" class="form-control">
                        {% endif %}
                    </div>
                <h2 class="pb-3">Usage</h2>
                    <div class="form-group">
                        <label for="licence">Licence</label>
                        {% if loggedIn == false %}
                        <div class="form-group pb-1">
                            <input id="licence" type="text" class="form-control" readonly>
                        </div>
                        {% else %}   
                        <select class="form-control" id="licence">
                            <option selected disabled>Please choose an option</option>
                            <option>http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/</option>
                            <option>https://choosealicense.com/licenses/apache-2.0/</option>
                            <option>https://choosealicense.com/licenses/gpl-3.0/</option>
                            <option>https://choosealicense.com/licenses/mpl-2.0/</option>
                            <option>https://choosealicense.com/licenses/mit/</option>
                        </select>
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="pia" class="form-label">Contains Personally identifiable information</label>
                        {% if loggedIn == false %}
                        <input id="pia" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="pia" type="text" class="form-control">
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="published" class="form-label">Published</label>
                        {% if loggedIn == false %}
                        <input id="published" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="published" type="text" class="form-control">
                        {% endif %}
                    </div>
                    <div class="form-group pb-1">
                        <label for="objective" class="form-label">Dataset objective</label>
                        {% if loggedIn == false %}
                        <input id="objective" type="text" class="form-control" readonly>
                        {% else %}
                        <input id="objective" type="text" class="form-control">
                        {% endif %}
                    </div>
                    {% if loggedIn == true %}
                    <a role="button" href="../" class="btn btn-primary mb-2 btn-lg rounded-0">Save and publish</a> <a class="p-3"
                        href="../">Cancel</a>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>
</main>

<script>
    let URL = window.location.href
    let parameters = URL.split("?id=")[1]
    let newInputDataset = parameters.split("&")[1]
    let dataset = parameters.split("&")[0]
    newInputDataset = parameters.split("=")[1]
    if (dataset != 0) {
        if (window.location.href.indexOf("authenticated") > -1) {
            document.getElementById("dependencies").href = "dependencies/index.html?id=" + dataset
        }
        document.getElementById("previous").href = "previous?id=" + dataset
        fetch('/assets/datasets.json')
            .then(response => response.json())
            .then(input => {
                let data = input;
                let dataset = data.find(findDataset)
                document.getElementById("mainTitle").innerHTML = dataset.datasetName
                document.getElementById("datasetID").value = dataset.datasetID
                document.getElementById("datasetTitle").value = dataset.datasetName
                document.getElementById("inputOwner").value = dataset.ownerName
                document.getElementById("input").value = dataset.uses
                document.getElementById("licence").value = dataset.licence
                document.getElementById("datasetType").value = dataset.datasetType
                document.getElementById("contactName").value = dataset.contactName
                document.getElementById("contactEmail").value = dataset.contactEmail
                document.getElementById("published").value = dataset.published
                document.getElementById("link").value = dataset.link
                document.getElementById("description").value = dataset.description
                document.getElementById("metadataCatalogueReference").value = dataset.metadataCatalogueReference
                document.getElementById("objective").value = dataset.objective
                document.getElementById("updateDate").innerHTML = "Last updated: " + dataset.updateDate
                if (dataset.pia === "y") {
                    document.getElementById("pia").value = "Yes"
                } else {
                    document.getElementById("pia").value = "No"
                }
                if (newInputDataset != 0) {
                    document.getElementById("input").value = newInputDataset + "," + dataset.uses
                }
            });
    } else {
        document.getElementById("datasetTitle").removeAttribute('readonly')
        document.getElementById("dependencies").classList.add('disabled')
        document.getElementById("mainTitle").innerHTML = "Create new dataset"
    }
    findDataset = (input) => {
        return input.datasetID === dataset;
    }
</script>