---
layout: basic
title: Dataset
nav: Home
---

<main role="main" id="content">
    <div class="jumbotron">
        <div class="container">
            <h1 class="display-4 font-weight-bold" id="mainTitle"></h1>
        </div>
    </div>
    <div class="container">
        <h2 class="pb-3">About this dataset</h2>
        <form>
            <div class="form-group row pb-1">
                <label for="datasetTitle" class="col-sm-2 col-form-label">Dataset title</label>
                <div class="col-sm-10">
                    <input id="datasetTitle" type="text" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group row pb-1">
                <label for="inputOwner" class="col-sm-2 col-form-label">Owner</label>
                <div class="col-sm-10">
                    {% if loggedIn == false %}
                    <input id="inputOwner" type="text" class="form-control" readonly>
                    {% else %}
                    <input id="inputOwner" type="text" class="form-control">
                    {% endif %}
                </div>
            </div>
            <div class="form-group row pb-1">
                <label for="input" class="col-sm-2 col-form-label">Input datasets</label>
                {% if loggedIn == false %}
                <div class="col-sm-10">
                    <input id="input" type="text" class="form-control" readonly>
                </div>
                {% else %}
                <div class="col-sm-8">
                    <input id="input" type="text" class="form-control" readonly>
                </div>
                {% endif %}
                {% if loggedIn == true %}
                <a role="button" id="dependencies" href="dependencies/" class="btn btn-primary mb-2 text-white">Add/edit</a>
                {% endif %}
            </div>
        </form>
        <h2 class="pb-3">Usage and licence</h2>
        <form>
            <div class="form-group">

                {% if loggedIn == false %}


                <div class="form-group row pb-1">
                    <label for="licence" class="col-sm-2 col-form-label">Licence</label>
                    <div class="col-sm-10">
                        <input id="licence" type="text" class="form-control" readonly>
                    </div>
                </div>
                {% else %}
                <label for="licence">Licence</label>
                <select class="form-control" id="licence">
                    <option selected disabled>Please choose an option</option>
                    <option>http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/</option>
                    <option>https://choosealicense.com/licenses/apache-2.0/</option>
                    <option>https://choosealicense.com/licenses/gpl-3.0/</option>
                    <option>https://choosealicense.com/licenses/mpl-2.0/</option>
                    <option>https://choosealicense.com/licenses/mit/</option>
                </select>
                {% endif %}
            </div>
            <div class="form-group row pb-1">
                <label for="pia" class="col-sm-2 col-form-label">Contains Personally identifiable
                    information</label>
                <div class="col-sm-10">
                    {% if loggedIn == false %}
                    <input id="pia" type="text" class="form-control" readonly>
                    {% else %}
                    <input id="pia" type="text" class="form-control">
                    {% endif %}
                </div>
            </div>
            {% if loggedIn == true %}
            <a role="button" href="../" class="btn btn-primary mb-2 btn-lg">Save</a> <a class="p-3" href="../">Cancel</a>
            {% endif %}
        </form>
    </div>
</main>

<script>
    let URL = window.location.href
    let parameters = URL.split("?id=")[1]
    let newInputDataset = parameters.split("&")[1]
    let dataset = parameters.split("&")[0]
    newInputDataset = parameters.split("=")[1]
    if (dataset != 0) {
        if (window.location.href.indexOf("authenticated") > -1) {
            document.getElementById("dependencies").href = "dependencies/index.html?id=" + dataset
        }
        d3.csv('/assets/data.csv', function (input) {
            let data = input;
            let dataset = data.find(findDataset)
            document.getElementById("mainTitle").innerHTML = dataset.datasetName
            document.getElementById("datasetTitle").value = dataset.datasetName
            document.getElementById("inputOwner").value = dataset.ownerName
            document.getElementById("input").value = dataset.uses
            document.getElementById("licence").value = dataset.licence
            if (dataset.pia === "y") {
                document.getElementById("pia").value = "Yes"
            } else {
                document.getElementById("pia").value = "No"
            }
            if (newInputDataset != 0) {
                document.getElementById("input").value = newInputDataset + "," + dataset.uses
            }
        });
    } else {
        document.getElementById("datasetTitle").removeAttribute('readonly')
        document.getElementById("dependencies").classList.add('disabled')
        document.getElementById("mainTitle").innerHTML = "Create new dataset"
    }
    findDataset = (input) => {
        return input.datasetID === dataset;
    }
</script>